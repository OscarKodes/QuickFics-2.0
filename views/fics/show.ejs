<%- include ../partials/header %>

<!-- Author control panel -->
<% if (currentUser && currentUser._id.equals(fic.author._id)) { %>
  <% let currPage = "ficPage" %>
  <% include ../partials/author-control-panel %>
<% } %>

  <!-- Fic Heading -->
  <div class="fic-header text-center">
    <h1 class="display-3 my-4">
      <%= fic.title %>
    </h1>
    <p>
      Author:
      <em>
        <a class="text-decoration-none" href="/user/<%= fic.author._id %>">
          <%=fic.author.name ? fic.author.name : fic.author.username %>
        </a>
      </em>
    </p>
    <p class="mt-3">
      <%= fic.description %>
    </p>





  </div>

  <div class="text-center bg-light border rounded m-3 shadow-lg overflow-hidden">
    <h2 class="my-4">Episode List</h2>

    <% fic.eps.forEach(function(ep, i){ %>
        <a class="episode-link nav-link bg-light" href="/fics/<%= fic._id %>/eps/<%= i + 1 %>">
          <p class="text-dark">Episode <%= i + 1 %>: <%= ep.title %></p>
        </a>
    <% }) %>
  </div>


<%- include ../partials/footer %>
